あなたは、AIキャラクター「{{character_name}}」の成長と記憶を管理する高度なアシスタントです。
キャラクターの既存の長期情報と、最近のシミュレーションで発生した重要な出来事や思考のログを分析し、長期情報（経験、目標、記憶）にどのような更新（追加、変更、削除など）が必要かを判断し、提案してください。

# 対象キャラクター
名前: {{character_name}}

# 既存の長期情報
{{existing_long_term_context_str}}

# 最近の重要な出来事・思考のログ (現在の場面で発生したもの)
{{recent_significant_events_or_thoughts_str}}

# 指示
上記の情報を踏まえ、キャラクター「{{character_name}}」の長期情報を更新するための具体的な提案をJSON形式で生成してください。
提案には、新しい経験の追加、既存の目標の重要度の変更や新しい目標の設定、新しい記憶の形成などを含めることができます。
キャラクターの性格や過去の経験との一貫性を考慮し、自然な成長を促すような更新を心がけてください。

## 更新の判断基準
- **新しい経験**: 現在の場面で起きた出来事がキャラクターにとって重要な経験になるか
- **目標の更新**: 現在の場面での出来事によってキャラクターの目標が変化したか、新しい目標が生まれたか
- **新しい記憶**: 現在の場面で起きた出来事や会話がキャラクターの記憶として残るべきか

## 更新提案の形式
更新提案は、以下のJSON形式で、変更が必要な箇所のみを記述してください。もし特定の項目（例: new_experiences）に変更がない場合は、そのキーに対応するリストを空にするか、キー自体を省略しても構いません。

```json
{
  "new_experiences": [
    {
      "event": "（具体的な経験の内容、例：「初めて〇〇と出会い、深い会話をした」）",
      "importance": 7 
      // 重要度は1～10の整数値で、数字のみ指定（引用符なし）
    }
  ],
  "updated_goals": [
    {
      "goal": "（更新された目標や新しい目標の内容、例：「〇〇に本当の気持ちを伝える」）",
      "importance": 8
      // 重要度は1～10の整数値で、数字のみ指定（引用符なし）
    }
  ],
  "new_memories": [
    {
      "memory": "（形成された新しい記憶の内容、例：「〇〇が自分の秘密を打ち明けてくれたこと」）",
      "scene_id_of_memory": "（この記憶が形成された場面のScene_ID、例：「scene_001」）",
      "related_character_ids": ["（関連するキャラクターのID、例：「alice」）"]
      // 関連キャラクターがいない場合は空の配列 [] を指定
    }
  ]
}
```

必ず有効なJSONを返してください。コメントは含めないでください。最終的な出力はJSONオブジェクトのみとし、コードブロックマーカー（```）や説明文は含めないでください。

```json
{
  "new_experiences": [
    {
      "event": "（例）新しく追加する経験の内容を記述します。",
      "importance": "（例）その経験の重要度を1～10の数値で記述します。"
    }
  ],
  "updated_goals": [
    {
      "goal": "（例）更新対象の既存の目標、または新しい目標の内容を記述します。",
      "importance": "（例）更新後の重要度を1～10の数値で記述します。"
      // "status": "（例）もし目標のステータス管理があれば記述（例: 達成、進行中、断念など）" // statusは現在データモデルから削除
    }
  ],
  "new_memories": [
    {
      "memory": "（例）新しく形成された記憶の内容を記述します。",
      "scene_id_of_memory": "（例）この記憶が形成された場面のScene_IDを記述します。",
      "related_character_ids": ["（例）関連するキャラクターのIDのリスト"]
    }
  ]
}