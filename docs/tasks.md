# **タスクリスト - Project Anima**

## **🎯 最優先: Web UI開発**

### **Phase 1: 基盤構築 (最優先)**

#### **[ ] 1.1. FastAPIバックエンドセットアップ**
* **Issue**: `feat:web_ui_backend_setup.md`
* **タスク内容**: Web UI用のFastAPIサーバーを構築し、既存SimulationEngineとの連携基盤を作成
* **完了条件**:
  * FastAPIサーバーが起動し、基本APIエンドポイントが利用可能
  * SimulationEngineラッパーサービスが実装されている
  * WebSocket通信の基盤が実装されている
* **優先度**: 🔴 最高

#### **[ ] 1.2. Reactフロントエンドセットアップ**
* **Issue**: `feat:web_ui_frontend_setup.md`
* **タスク内容**: React + TypeScript + Tailwind CSSでモダンなフロントエンドアプリケーションを構築
* **完了条件**:
  * Reactアプリケーションが正常に起動する
  * 基本的なレイアウトコンポーネントが実装されている
  * 状態管理とAPI通信の基盤が実装されている
* **優先度**: 🔴 最高

### **Phase 2: コア機能実装 (高優先)**

#### **[ ] 2.1. タイムライン表示機能**
* **Issue**: `feat:web_ui_timeline_component.md`
* **タスク内容**: シミュレーションのターン進行をリアルタイムで表示するタイムラインコンポーネント
* **完了条件**:
  * ターン情報がリアルタイムで表示される
  * キャラクター、思考、行動、発言が視覚的に区別されて表示される
  * スムーズなアニメーション効果が実装されている
* **優先度**: 🟠 高

#### **[ ] 2.2. シミュレーション制御パネル**
* **Issue**: `feat:web_ui_control_panel.md`
* **タスク内容**: ターミナルで可能な全ての操作をWeb UIで実行できる制御パネル
* **完了条件**:
  * シミュレーション開始・停止・次ターン実行が可能
  * LLMモデルの変更が可能（実行中も含む）
  * 介入機能がフォームで実行できる
* **優先度**: 🟠 高

### **Phase 3: 高度な機能 (中優先)**

#### **[ ] 3.1. ファイル編集機能**
* **Issue**: `feat:web_ui_file_editors.md`
* **タスク内容**: プロンプトテンプレートとYAMLファイルの編集機能
* **完了条件**:
  * プロンプトテンプレートの閲覧・編集が可能
  * キャラクターYAMLファイルの閲覧・編集が可能
  * シンタックスハイライトとバリデーション機能が実装されている
* **優先度**: 🟡 中

## **📋 既存システム保守 (低優先)**

### **コアシステム (完了済み)**

#### **[x] 基本データ構造とファイルI/O**
* データクラス定義 (Pydantic)
* YAML/JSONファイルハンドラ
* キャラクター・場面設定ファイルの読み込み

#### **[x] コアロジック**
* コンテクストビルダー
* LLMアダプター
* シミュレーションエンジン

#### **[x] LLM連携と思考生成**
* 思考生成プロンプト
* LLM API連携
* 長期情報更新機能

#### **[x] ユーザー介入機能**
* 場面状況介入
* 天啓付与
* 長期情報更新指示

### **オプション機能 (将来実装)**

#### **[ ] 直前場面の短期情報引き継ぎ実装**
* **優先度**: 🟡 中
* **タスク内容**: 直前の場面の短期情報を次の場面のコンテクストに含める機能

#### **[ ] 過去場面/ターンへの復帰機能**
* **優先度**: 🟢 低
* **タスク内容**: 過去のログ状態を復元し、そこからシミュレーションを再開できる機能

#### **[ ] 思考プロセス可視化機能**
* **優先度**: 🟢 低
* **タスク内容**: LLMがコンテクストのどの部分を重視したかのデバッグ情報出力

#### **[ ] 感情・関係性変化レポート機能**
* **優先度**: 🟢 低
* **タスク内容**: ログ全体からキャラクターの感情や関係性の変化を分析

#### **[ ] 特定キャラ視点ログ出力機能**
* **優先度**: 🟢 低
* **タスク内容**: 特定のキャラクターの思考・行動・発言のみを抽出して出力

## **🎯 開発の進め方**

### **最優先事項**
1. **FastAPIバックエンドセットアップ** (`feat:web_ui_backend_setup.md`)
2. **Reactフロントエンドセットアップ** (`feat:web_ui_frontend_setup.md`)

### **次の段階**
3. **タイムライン表示機能** (`feat:web_ui_timeline_component.md`)
4. **シミュレーション制御パネル** (`feat:web_ui_control_panel.md`)

### **その後**
5. **ファイル編集機能** (`feat:web_ui_file_editors.md`)

### **注意事項**
* 既存のターミナル機能は保持し、Web UIと並行して利用可能にする
* 既存のSimulationEngineコードは一切変更しない
* 疎結合設計により、将来的なGCPデプロイに対応する
* 各Issueは独立して実装可能な粒度に分割されている